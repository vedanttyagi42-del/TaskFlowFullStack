{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///home/veduuvada/TaskFlowGit/TaskFlow/src/lib/db.js"],"sourcesContent":["import { Pool } from \"pg\";\n\nexport const pool = new Pool({\n  user: \"postgres\",\n  host: \"switchback.proxy.rlwy.net\",\n  database: \"railway\",\n  password: \"eWQWOEZqwWJBBZgELqWPOvMDUWluUycE\",\n  port: 15983,\n});\n"],"names":[],"mappings":";;;;AAAA;;;;;;AAEO,MAAM,OAAO,IAAI,4GAAI,CAAC;IAC3B,MAAM;IACN,MAAM;IACN,UAAU;IACV,UAAU;IACV,MAAM;AACR"}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///home/veduuvada/TaskFlowGit/TaskFlow/src/app/api/tasks/route.js"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport jwt from \"jsonwebtoken\";\nimport { pool } from \"@/lib/db\";\n\nfunction auth(req) {\n  const token = req.cookies.get(\"token\")?.value;\n  if (!token) throw new Error(\"Unauthorized\");\n  return jwt.verify(token, process.env.NEXT_PUBLIC_JWT_SECRET);\n}\n\nexport async function GET(req) {\n  try {\n    const user = auth(req);\n\n    const tasks = await pool.query(\n      \"SELECT * FROM user_tasks WHERE username=$1 ORDER BY created_at DESC\",\n      [user.username]\n    );\n\n    return NextResponse.json(tasks.rows);\n  } catch {\n    return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\n  }\n}\n\nexport async function POST(req) {\n  try {\n    const user = auth(req);\n    const { task_name } = await req.json();\n\n    const result = await pool.query(\n      `INSERT INTO user_tasks (task_name, username, completed, created_at)\n       VALUES ($1,$2,false,NOW()) RETURNING *`,\n      [task_name, user.username]\n    );\n\n    return NextResponse.json({ task: result.rows[0] });\n  } catch {\n    return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;;;;;AAEA,SAAS,KAAK,GAAG;IACf,MAAM,QAAQ,IAAI,OAAO,CAAC,GAAG,CAAC,UAAU;IACxC,IAAI,CAAC,OAAO,MAAM,IAAI,MAAM;IAC5B,OAAO,kJAAG,CAAC,MAAM,CAAC;AACpB;AAEO,eAAe,IAAI,GAAG;IAC3B,IAAI;QACF,MAAM,OAAO,KAAK;QAElB,MAAM,QAAQ,MAAM,0HAAI,CAAC,KAAK,CAC5B,uEACA;YAAC,KAAK,QAAQ;SAAC;QAGjB,OAAO,gJAAY,CAAC,IAAI,CAAC,MAAM,IAAI;IACrC,EAAE,OAAM;QACN,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;IACpE;AACF;AAEO,eAAe,KAAK,GAAG;IAC5B,IAAI;QACF,MAAM,OAAO,KAAK;QAClB,MAAM,EAAE,SAAS,EAAE,GAAG,MAAM,IAAI,IAAI;QAEpC,MAAM,SAAS,MAAM,0HAAI,CAAC,KAAK,CAC7B,CAAC;6CACsC,CAAC,EACxC;YAAC;YAAW,KAAK,QAAQ;SAAC;QAG5B,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,MAAM,OAAO,IAAI,CAAC,EAAE;QAAC;IAClD,EAAE,OAAM;QACN,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;IACpE;AACF"}}]
}